<div class="cart-page">

  <!-- Header -->
  <header class="header">
    <div class="logo" routerLink="/landing">
      <img src="assets/logo.jpg" alt="MatahomPH Logo" class="logo-img">
      <div class="logo-texts">
        <span class="logo-title">MatahomPH</span>
        <span class="logo-subtitle">Beauty & Care</span>
      </div>
    </div>
    <div class="nav-profile-cart">
      <button class="cart-btn" routerLink="/cart" type="button">ðŸ›’</button>
    </div>
  </header>

  <!-- Cart Section -->
  <section id="cart-page" class="container" aria-label="Shopping cart">
    <div class="cart-header flex items-center justify-between">
      <div>
        <h1 id="cart-title">Your Matahom Cart</h1>
        <p class="subtitle">Review your picks before checking out.</p>
      </div>
      <button type="button" class="continue-shopping-btn" routerLink="/products">
        Continue shopping
      </button>
    </div>

    <div class="cart-grid">
      <!-- Cart Items -->
      <section class="cart-items">
        <!-- Loading / Error -->
        <p *ngIf="loading">Loading cart...</p>
        <p *ngIf="errorMsg">{{ errorMsg }}</p>

      <div
  id="cart-list"
  class="items-list"
  *ngIf="!loading && !errorMsg && orders.length > 0"
>
  <ng-container *ngFor="let o of orders; let i = index">
    <div class="cart-card" *ngIf="(o.items?.length || 0) > 0">
      <!-- LEFT -->
      <div class="card-left">
        <div class="card-title">Order #{{ o.order_id }}</div>

        <div class="item-row" *ngFor="let it of (o.items || [])">
          <div class="item-text">
            <div class="item-name">{{ it['product_name'] }}</div>
            <div class="item-sub">
              Qty: {{ it['quantity'] || 1 }} â€¢ â‚±{{ it['price'] || 0 }}
            </div>
          </div>

          <button type="button" class="remove-btn" (click)="removeItem(i, it)">
            Remove
          </button>
        </div>

        <div class="meta">
          <span>Status: <b>{{ o.status }}</b></span>
          <span>Ship to: <b>{{ o.shipping_address }}</b></span>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card-right">
        <div class="price">â‚±{{ o.total_amount }}</div>
      </div>
    </div>
  </ng-container>
</div>


        <!-- Empty Message -->
        <p
          id="cart-empty"
          class="empty-msg"
          *ngIf="!loading && !errorMsg && orders.length === 0"
        >
          Your cart is empty. Add something lovely from the shop.
        </p>
      </section>

      <!-- Order Summary -->
      <aside class="order-summary">
        <h2>Summary</h2>
        <div class="summary-details">
          <div class="line">
            <span>Subtotal</span>
            <span id="summary-subtotal">â‚±{{ subtotal | number:'1.2-2' }}</span>
          </div>
          <div class="line"><span>Shipping</span><span>Calculated at checkout</span></div>
          <div class="line"><span>Estimated tax</span><span>Included</span></div>
          <hr>
          <div class="line total">
            <span>Total</span>
            <span id="summary-total">â‚±{{ subtotal | number:'1.2-2' }}</span>
          </div>
        </div>

        <button id="cart-checkout-btn" type="button" (click)="checkout()">
          Proceed to checkout
        </button>

        <p class="note">This is a demo flowâ€”no real payments will be processed.</p>
      </aside>
    </div>
  </section>
</div>

<!-- Footer -->
<footer class="py-6 text-center text-sm text-slate-500 border-t border-pink-200">
  Â© 2025 Matahom Beauty. All rights reserved.
</footer>
