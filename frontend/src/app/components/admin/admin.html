<div class="dashboard-container">
  <button routerLink="/" class="back-btn">‚Üê Go to Shop</button>

  <!-- Header -->
  <div class="dashboard-header mb-6">
    <h1>Inventory & Order Management</h1>
    <p>Manage inventory, track orders, and monitor inventory movement</p>
  </div>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    <div class="summary-card">
      <div>
        <p class="text-gray-500 text-sm">TOTAL PRODUCTS</p>
        <p class="text-xl font-bold">{{ totalProducts }}</p>
      </div>
      <div class="text-3xl">üì¶</div>
    </div>

    <div class="summary-card">
      <div>
        <p class="text-gray-500 text-sm">TOTAL ORDERS</p>
        <p class="text-xl font-bold">{{ totalOrders }}</p>
      </div>
      <div class="text-3xl">üìÑ</div>
    </div>

    <div class="summary-card">
      <div>
        <p class="text-gray-500 text-sm">LOW STOCK ITEMS</p>
        <p class="text-xl font-bold text-yellow-500">{{ lowStockItems }}</p>
      </div>
      <div class="text-3xl">‚ö†Ô∏è</div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="bg-white rounded shadow tabs mb-6">
    <nav class="flex border-b">
      <button [class.active]="activeTab === 'products'" (click)="switchTab('products')">Products</button>
      <button [class.active]="activeTab === 'orders'" (click)="switchTab('orders')">Orders</button>
      <button [class.active]="activeTab === 'inventory_logs'" (click)="switchTab('inventory_logs')">Inventory Logs</button>
      <button [class.active]="activeTab === 'users'" (click)="switchTab('users')">Users</button>
    </nav>

    <div class="p-4">

      <!-- PRODUCTS TAB -->
      <div *ngIf="activeTab === 'products'">
        <button class="add-btn mb-4" (click)="addNewProduct()">+ Add New Product</button>

        <div *ngIf="products.length === 0" class="empty-state">
          <div class="icon">üì¶</div>
          <p>No products yet</p>
          <p class="text-sm">Click "Add New Product" to get started</p>
        </div>

        <table *ngIf="products.length > 0">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Stock</th>
              <th>Price</th>
              <th>Action</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let product of products">
              <td data-label="ID">{{ product.Product_ID }}</td>
              <td data-label="Name">{{ product.Product_Name }}</td>
              <td data-label="Stock">{{ product.Stock_Quantity }}</td>
              <td data-label="Price">‚Ç±{{ product.Price.toFixed(2) }}</td>
              <td data-label="Action">
                <button class="delete-btn" (click)="deleteProduct(product.Product_ID)">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ORDERS TAB -->
      <div *ngIf="activeTab === 'orders'">

        <div *ngIf="orders.length === 0" class="empty-state">
          <div class="icon">üìÑ</div>
          <p>No orders found</p>
          <p class="text-sm">Orders will appear once customers checkout</p>
        </div>

        <table *ngIf="orders.length > 0">
          <thead>
            <tr>
              <th>Order ID</th>
              <th>User ID</th>
              <th>Total Amount</th>
              <th>Order Date</th>
              <th>Status</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let order of orders">
              <td data-label="Order ID">{{ order.Order_ID }}</td>
              <td data-label="User ID">{{ order.User_ID }}</td>
              <td data-label="Total Amount">‚Ç±{{ order.Total_Amount.toFixed(2) }}</td>
              <td data-label="Order Date">{{ order.Order_Date | date:'medium' }}</td>
              <td data-label="Status">
                <select
                  [ngModel]="order.Order_Status"
                  (ngModelChange)="changeOrderStatus(order.Order_ID, $event)">
                  <option *ngFor="let status of orderStatuses" [value]="status">{{ status }}</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

    <!-- INVENTORY LOGS TAB -->
    <div *ngIf="activeTab === 'inventory_logs'">
      <div *ngIf="inventoryLogs.length === 0" class="empty-state">
        <div class="icon">üìä</div>
        <p>No inventory logs yet</p>
        <p class="text-sm">Logs will appear when stock changes occur</p>
      </div>

      <table *ngIf="inventoryLogs.length > 0">
        <thead>
          <tr>
            <th>Log ID</th>
            <th>Product ID</th>
            <th>Quantity Changed</th>
            <th>Remarks</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let log of inventoryLogs">
            <td data-label="Log ID">{{ log.Log_ID }}</td>
            <td data-label="Product ID">{{ log.Product_ID }}</td>
            <td data-label="Qty Changed">{{ log.Quantity_Changed }}</td>
            <td data-label="Remarks">{{ log.Remarks }}</td>
            <td data-label="Date">{{ log.Log_Date | date:'medium' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

      <!-- USERS TAB -->
      <div *ngIf="activeTab === 'users'">

        <div *ngIf="users.length === 0" class="empty-state">
          <div class="icon">üë§</div>
          <p>No users found</p>
          <p class="text-sm">Users will appear once someone registers</p>
        </div>

        <table *ngIf="users.length > 0">
          <thead>
            <tr>
              <th>User ID</th>
              <th>Full Name</th>
              <th>Email</th>
              <th>Username</th>
              <th>Role</th>
              <th>Contact</th>
              <th>Address</th>
              <th>Action</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let user of users">
              <td data-label="User ID">{{ user.User_ID }}</td>
              <td data-label="Full Name">{{ user.Full_Name }}</td>
              <td data-label="Email">{{ user.Email }}</td>
              <td data-label="Username">{{ user.Username }}</td>
              <td data-label="Role">{{ user.Role }}</td>
              <td data-label="Contact">{{ user.Contact_Number }}</td>
              <td data-label="Address">{{ user.Address }}</td>
              <td data-label="Action">
                <button class="delete-btn" (click)="deleteUser(user.User_ID)">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

    </div>
  </div>
</div>
